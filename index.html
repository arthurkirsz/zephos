<meta name="viewport" content="width=device-width, user-scalable=no">
<style type="text/css">

  @font-face {
    font-family: "Triforce";
    src: url('fonts/Triforce.ttf');
  }
  @font-face {
    font-family: "Hylian Symbols";
    src: url('fonts/HylianSymbols.ttf');
  }
  @font-face {
    font-family: "Ancient Hylian";
    src: url('fonts/AncientHylian.otf');
  }
  @font-face {
    font-family: "Sherwood";
    src: url('fonts/sherwood.ttf');
  }

  * {
    margin: 0;
    padding: 0;
    font-family: "Triforce", sans-serif;
    font-weight: 100;
  }

  html, body {
    background: #1f2127;
  }

  canvas {
    display: block;
    position:fixed;
    top:0px;
    left:0px;
  }
</style>


<div style="position: fixed;background: rgba(0,0,0,.35);padding: 20px; width: 300px; height: 140px; top: 50%; left: calc(50% - 150px);transform: translateY(-50%); z-index:1;color:#fff; text-align: center;">

  <span style="font-size: 60px;">Zephos</span>
  <br>
  <br>
  <span style="text-transform: uppercase;font-size: 14px;font-family:'Sherwood'">the windy particle engine</span>
  <span style="font-size: 50px;font-family:'Hylian Symbols'; position: absolute;bottom: 15px;left: 160px;">l</span>
</div>

<canvas id="canvas"></canvas>
<script type="text/javascript" src="zephos.js?103"></script>

<script type="text/javascript">
  window.requestAnimFrame =
    window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function(callback) {
      return window.setTimeout(callback, 1000 / 60);
    };

  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext('2d');
  ctx.shadowColor = '#88FF88';
  ctx.shadowBlur = 10;
  ctx.shadowOffsetX = 0;
  ctx.shadowOffsetY = 0;


  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  Zephos.initialize(ctx);
  

  var Loop = function() {
    Zephos.particlesDraw();    
    window.requestAnimFrame(Loop);
  };

  window.isDown = false;
  window.addEventListener('mousedown', function(e) {
    window.isDown = true;
    Zephos.particles = [];
    respawn(e.clientX, e.clientY);
  });

  window.addEventListener('mouseup', function(e) {
    window.isDown = false;
  });

  window.addEventListener('mousemove', function(e) {
    if (window.isDown)
      respawn(e.clientX, e.clientY);
  });
  window.addEventListener('touchmove', function(event) {
    respawn(event.touches[0].clientX, event.touches[0].clientY);
  });


  function respawn(x, y) {
    if (Zephos.particles.length < 501) {
      Zephos.spawn(5, x, y)
    }
  }

  Loop();
</script>