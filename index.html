<style type="text/css">
  @font-face {
    font-family: "Triforce";
    src: url('fonts/Triforce.ttf');
  }
  @font-face {
    font-family: "Hylian Symbols";
    src: url('fonts/HylianSymbols.ttf');
  }
  @font-face {
    font-family: "Ancient Hylian";
    src: url('fonts/AncientHylian.otf');
  }
  @font-face {
    font-family: "Sherwood";
    src: url('fonts/sherwood.ttf');
  }

  * {
    margin: 0;
    padding: 0;
    font-family: "Triforce", sans-serif;
    font-weight: 100;
  }

  body {
    background: #1f2127;
  }

  h1 {
    margin: 20px;
    text-align: center;
    color: #fff;
  }

  canvas {
    display: block;
    position:fixed;
    top:0px;
    left:0px;
  }
</style>

<div style="position: fixed;background: rgba(0,0,0,.35);padding: 20px; width: 300px; height: 140px; top: 50%; left: calc(50% - 150px);transform: translateY(-50%); z-index:1;color:#fff; text-align: center;">

  <span style="font-size: 60px;">Zephos</span>
  <br>
  <br>
  <span style="text-transform: uppercase;font-size: 14px;font-family:'Sherwood'">the windy particle engine</span>
  <span style="font-size: 50px;font-family:'Hylian Symbols'; position: absolute;bottom: 15px;left: 160px;">l</span>
</div>

<canvas id="canvas"></canvas>
<script type="text/javascript" src="./zephos.js"></script>
<script type="text/javascript">
  window.requestAnimFrame =
    window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function(callback) {
      return window.setTimeout(callback, 1000 / 60);
    };

  var canvas = document.getElementById('canvas'),
      ctx = canvas.getContext('2d');

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  Zephos.initialize(ctx);

  var Loop = function() {    

    ctx.fillStyle = '#31AAEC';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = '#1f2127';
    ctx.beginPath();
    var bottom = canvas.height;
    ctx.moveTo(0, bottom);
    ctx.lineTo(50, bottom - 50);
    ctx.lineTo(100, bottom);

    ctx.moveTo(50, bottom);
    ctx.lineTo(150, bottom - 100);
    ctx.lineTo(200, bottom);

    ctx.moveTo(100, bottom);
    ctx.lineTo(200, bottom - 120);
    ctx.lineTo(300, bottom);
    
    ctx.moveTo(250, bottom);
    ctx.lineTo(320, bottom - 80);
    ctx.lineTo(400, bottom);
    
    ctx.moveTo(400, bottom);
    ctx.lineTo(520, bottom - 220);
    ctx.lineTo(650, bottom);
    
    ctx.moveTo(600, bottom);
    ctx.lineTo(700, bottom / 1.8);
    ctx.lineTo(800, bottom);
    
    ctx.moveTo(750, bottom);
    ctx.lineTo(850, bottom - 100);
    ctx.lineTo(920, bottom);
    
    ctx.moveTo(900, bottom);
    ctx.lineTo(1000, bottom - 140);
    ctx.lineTo(1100, bottom);
    
    ctx.moveTo(910, bottom);
    ctx.lineTo(1100, bottom - 140);
    ctx.lineTo(1280, bottom);
    
    
    ctx.fill();



    Zephos.update();
    for (var i = Zephos.particles.length - 1; i >= 0; i--) {
      var p = Zephos.particles[i];
      if(p.y > canvas.height +20 || p.y < -20 || p.x < -10 || p.x > canvas.width + 10) {
        Zephos.particles.splice(i,1);

        var newp = new Zephos.Particle(0, 0, 0, Zephos.context);


        if(Math.random()>.35) {
          newp.x = Zephos.Utils.randInt(canvas.width);
          newp.y = 0;  
          newp.gx = - 0.06;
        }
        else {
          newp.x = canvas.width;
          newp.y = Zephos.Utils.randInt(canvas.height/1.5);
          newp.gx = -.2;
        }
        


        newp.size = 1.5 + Zephos.Utils.randInt(2);
        newp.gy = 0.002;
        newp.frictY = 1.0000001;
        newp.life = 1000;
        newp.dy = Math.abs(newp.dy);
        newp.circle = true;





        Zephos.particles.push(newp);
      }


    }

    window.requestAnimFrame(Loop);
  };

  Loop();
  (function () {
    for(j in Zephos.generateParticles(100, canvas.width/2, canvas.height/2, 2, ctx) ) {
      var p = Zephos.particles[j];
      p.x = Zephos.Utils.randInt(canvas.width);
      p.y = Zephos.Utils.randInt(canvas.height);

      p.size = 1.5 + Zephos.Utils.randInt(2);
      p.gx = - 0.08;
      p.gy = 0.001;
      p.frictY = 1.0000001;
      p.life = 1000;
      p.dy = Math.abs(p.dy);
      p.circle = true;
    }
  })();

</script>